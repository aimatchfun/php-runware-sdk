# Changelog

All the notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/lang/en-US/spec/v2.0.0.html).

## [Unreleased]

## [3.0.0] - 2026-01-XX

### Changed (Breaking)
- **BREAKING**: `run()` and `runAsync()` methods now return `RunwareResponse` instead of `string`
  - All services (`ImageInference`, `Inpainting`, `PhotoMaker`) now return a `RunwareResponse` DTO
  - The DTO contains structured data: `cost`, `seed`, `imageURL`, `imageUUID`, `taskUUID`
  - To access image URL: `$response->first()->imageURL` instead of direct string return
  - Updated all method signatures and return types
  - This is a breaking change - existing code using `run()` will need to be updated

### Added
- `RunwareResponse` collection class with Laravel-like methods:
  - `first()` - Get the first result
  - `get(int $index)` - Get result at specific index
  - `eq(int $index)` - Alias for `get()`
  - `all()` - Get all results as array
  - `count()` - Count total results
- `RunwareImageResponse` DTO with all API response fields:
  - `cost` (float|null)
  - `seed` (int|null)
  - `imageURL` (string|null)
  - `imageUUID` (string)
  - `taskUUID` (string)
  - `imageBase64Data` (string|null)
  - `imageDataURI` (string|null)
  - `taskType` (string)

### Migration Guide
**Before (v2.x):**
```php
$url = $textToImage->run(); // Returns string directly
```

**After (v3.0):**
```php
$response = $textToImage->run(); // Returns RunwareResponse
$url = $response->first()->imageURL; // Access via DTO
// Or use helper method:
$url = $response->getImageData('URL');
```

## [2.10.0] - 2026-01-XX

### Changed
- `negativePrompt()` method in `TextToImage` and `PhotoMaker` classes is now optional
  - Removed requirement for negative prompt when generating images
  - Negative prompt will only be included in the request if provided
  - Updated documentation and examples to reflect this change

## [2.3.0] - 2026-01-09

### Added
- New `ImageUpload` service class for uploading images to Runware API
  - Supports multiple image formats: URLs, base64 strings, and data URIs
  - Returns image UUID for use in other operations (e.g., inpainting)
  - Includes async support via `runAsync()` method
  - Comprehensive documentation and examples in README

## [2.2.0] - 2025-12-11

### Added
- `model()` method in `TextToImage` and `Inpainting` classes now accepts both `RunwareModel` enum and string values (AIR format), providing more flexibility when specifying models

## [2.0.2] - 2025-12-08

### Fixed
- Fixed `addLora()` method to properly include LoRAs in request body under `lora` field

## [2.0.0] - 2025-12-08

### Changed (Breaking)
- **BREAKING**: Renamed `ModelAir` enum to `RunwareModel`
  - All references to `ModelAir` must be updated to `RunwareModel`
  - Example: `ModelAir::REAL_DREAM_SDXL_PONY_14` â†’ `RunwareModel::REAL_DREAM_SDXL_PONY_14`
  - Updated all method signatures that accepted `ModelAir` to accept `RunwareModel`
  - Updated documentation and examples
- Fixed incorrect references to `FluxScheduler` in documentation (should be `Scheduler`)
- Default `clipSkip` value changed from 1 to 0
- Default `width` and `height` values changed from 512 to 1024

### Internal
- Reorganized source code into subdirectories for better structure:
  - `src/Enums/` - Contains all enum classes (RunwareModel, Scheduler, OutputType, etc.)
  - `src/Services/` - Contains service classes (TextToImage, RunwareImageUpload)
  - `src/Models/` - Contains model/value object classes (RunwareResponse, Refiner, ControlNet, etc.)
- Updated autoload configuration in `composer.json` to support new directory structure using classmap
- Fixed `ControlNet` class definition (was incorrectly defined as enum, now properly defined as class)

### Fixed
- Synchronized `composer.lock` with `composer.json` dependencies

## [1.0.0] - 2025-03-11

### Added
- Creation of textToImage, imageToImage, inpainting and outpainting functions